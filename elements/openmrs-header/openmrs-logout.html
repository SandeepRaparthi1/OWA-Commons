<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="stylesheet" type="text/css" href="/css/main.css">

<dom-module id="openmrs-logout">
    <template>
    <iron-ajax
    auto
    url="http://localhost:8080/openmrs/ws/rest/v1/session"
    on-response="handleResponse">
    </iron-ajax>  
      <a>
        <span id="el"></span>
        <i class="icon-signout small"></i>
      </a>
    </template>    
</dome-module>

<script>
    Polymer({
        is: "openmrs-logout", 
        handleResponse:function(request)
        {
             if(request.detail.response.authenticated)
             {
             	this.$.el.textContent= "Logout";
             }
             else
             {
             	this.$.el.textContent= "Login";
             }
        }      
    });
</script>